.prepend-1.span-22.append-1.prepend-top
  .prepend-1.span-7.append-1
    .span-2<
      - if @user == current_user
        %p= link_to user_defined_image(@user, :medium, :alt => "#{h @user.login}"), account_path
      - else
        -# TODO link_to original size?
        %p= user_defined_image(@user, :medium, :alt => "#{h @user.login}")
    .span-5.prepend-top.last<
      %h3.center=h @user.login
      - unless @user == current_user or current_user.friendships.exists?(:friend_id => @user)
        %h6.center= button_to "Add Friend", friendships_path(:friend_id => @user), :method => :post  
    %br{:style => "clear: both"}
    - unless @user.profile.name.blank?
      %h6.quiet= h @user.profile.name 
    - unless @user.profile.location.blank?
      %h6.quiet= h @user.profile.location 
      -# TODO write helper method for links and breadcrumbs ...
    - unless @user.profile.link.blank? or @user.profile.link == "http://"
      %h6.quiet= link_to h(@user.profile.link), h(@user.profile.link) if @user.profile.link.include?("http://")
    %h5.quiet=h @user.profile.detail if @user.profile.detail
    %h3< 
      Cred
      %hr
    = user_cred_images(@user, :small)
    %br{:clear => :both}
    %h3.prepend-top<
      Friends
      %hr
    %ul
      - @user.friendships.each do |friendship|
        %li<
          =h friendship.friend.login
          - if @user == current_user
            (
            = link_to "remove", friendship, :method => :delete
            )
    %br{:clear => :both}

    %h3.prepend-top<
      Friended by
      %hr
    %ul
      - @user.inverse_friends.each do |inverse_friendship|
        %li=h inverse_friendship.login
        
    - if @user == current_user
      %br
      %br 
      -#.flr= link_to 'edit', edit_account_path
      .prepend-1.quiet.small== [ #{link_to 'viewing your public profile', account_path} ]
      %br{:style => "clear:both"}
      %br
      %br 
  .span-12.append-1.prepend-top.last
    - if @user.groups.count.zero? and @user == current_user
      %h3.prepend-top< 
        Groups
        %hr
      %h3= link_to "Create or join a group!", groups_path
    - elsif @user.groups.count > 0
      %h3.prepend-top< 
        Groups
        %hr
    - @user.groups.reverse.each do |g|
      = link_to user_defined_image(g, :small, :alt => "#{h g.name}", :title => "#{h g.name}"), group_path(g)
    - if @user.grants.awarded.count > 0
      %h3.prepend-top< 
        Awards
        %hr
    - @user.grants.awarded.reverse.each do |g|
      = link_to user_defined_image(g, :small, :alt => "#{h g.name}", :title => "#{h g.name}"), group_grant_path(g.group, g)
    - if @user.grants.session.count > 0
      %h3.prepend-top< 
        Sessions
        %hr
    - @user.grants.session.reverse.each do |g|
      - unless g.votes.count.zero?
        = link_to user_defined_image(g, :small, :alt => "#{h g.name}", :title => "#{h g.name}"), group_grant_path(g.group, g)
    %br
    %br
    %br       
